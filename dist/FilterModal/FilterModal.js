var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _objectSpread2=_interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _react=_interopRequireDefault(require("react"));var _propTypes=require("prop-types");var _reactNative=require("react-native");var _Theme=_interopRequireDefault(require("../Theme"));var _Switch=_interopRequireDefault(require("../Switch/Switch"));var _Button=_interopRequireDefault(require("../Button/Button"));var _Layout=require("../Layout/Layout");var _jsxFileName="/Users/nacho/projects/el-native/src/FilterModal/FilterModal.js";var theme=_Theme.default.getTheme();var styles=theme.filterModal;var colors=theme.colors;var FilterModal=function(_React$Component){(0,_inherits2.default)(FilterModal,_React$Component);(0,_createClass2.default)(FilterModal,null,[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){var selectAll=nextProps.filters.every(function(e){return e.value;});return(0,_objectSpread2.default)({},prevState,{filters:nextProps.filters,selectAll:selectAll});}}]);function FilterModal(props){var _this;(0,_classCallCheck2.default)(this,FilterModal);_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(FilterModal).call(this,props));_this.updateFilter=function(filter,value){var filters=_this.state.filters;filters[filters.indexOf(filter)].value=value;_this.setState({filters:filters});};_this.updateSelectAll=function(value,filters){filters.forEach(function(filter){return _this.updateFilter(filter,value);});_this.setState(function(prevState){return{selectAll:!prevState.selectAll};});};_this.handleClose=function(filters){filters.forEach(function(filter){return _this.updateFilter(filter,false);});_this.props.applyFilters(_this.state.filters);};_this.handleApplyFilters=function(){_this.props.applyFilters(_this.state.filters);};_this.state={selectAll:false,filters:props.filters};return _this;}(0,_createClass2.default)(FilterModal,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,title=_this$props.title,modalVisible=_this$props.modalVisible;var _this$state=this.state,selectAll=_this$state.selectAll,filters=_this$state.filters;return _react.default.createElement(_reactNative.Modal,{animationType:"slide",visible:modalVisible,onRequestClose:function onRequestClose(){return _this2.handleClose(filters);},__source:{fileName:_jsxFileName,lineNumber:65}},_react.default.createElement(_Layout.Col,{style:styles.wrapper,__source:{fileName:_jsxFileName,lineNumber:70}},_react.default.createElement(_Layout.Row,{style:(0,_objectSpread2.default)({},styles.row,styles.titleWrapper),__source:{fileName:_jsxFileName,lineNumber:71}},_react.default.createElement(_reactNative.Text,{style:styles.title,__source:{fileName:_jsxFileName,lineNumber:72}},title),_react.default.createElement(_Button.default,{onPress:function onPress(){return _this2.handleClose(filters);},icon:"ios-close",textStyles:styles.buttonText,transparent:true,__source:{fileName:_jsxFileName,lineNumber:73}})),_react.default.createElement(_reactNative.ScrollView,{style:styles.innerWrapper,showsVerticalScrollIndicator:false,__source:{fileName:_jsxFileName,lineNumber:80}},_react.default.createElement(_Layout.Row,{style:styles.row,__source:{fileName:_jsxFileName,lineNumber:81}},_react.default.createElement(_reactNative.Text,{style:(0,_objectSpread2.default)({},styles.text,styles.selectAll),__source:{fileName:_jsxFileName,lineNumber:82}},"Select All"),_react.default.createElement(_Switch.default,{color:colors.primary,value:selectAll,onPress:function onPress(value){return _this2.updateSelectAll(value,filters);},styles:styles.switch,__source:{fileName:_jsxFileName,lineNumber:83}})),filters.length&&filters.map(function(filter,i){return _react.default.createElement(_Layout.Row,{key:i,style:styles.row,__source:{fileName:_jsxFileName,lineNumber:93}},_react.default.createElement(_reactNative.Text,{style:(0,_objectSpread2.default)({},styles.text,styles.filter),numberOfLines:1,__source:{fileName:_jsxFileName,lineNumber:94}},filter.name),_react.default.createElement(_Switch.default,{color:colors.primary,value:filter.value,onPress:function onPress(value){return _this2.updateFilter(filter,value);},styles:styles.switch,__source:{fileName:_jsxFileName,lineNumber:97}}));}),_react.default.createElement(_Layout.Row,{style:styles.extraRow,__source:{fileName:_jsxFileName,lineNumber:105}})),_react.default.createElement(_reactNative.View,{style:styles.button,__source:{fileName:_jsxFileName,lineNumber:107}},_react.default.createElement(_Button.default,{onPress:this.handleApplyFilters,block:true,text:"APPLY FILTERS",__source:{fileName:_jsxFileName,lineNumber:108}}))));}}]);return FilterModal;}(_react.default.Component);FilterModal.propTypes={title:_propTypes.string.isRequired,filters:_propTypes.array.isRequired,modalVisible:_propTypes.bool.isRequired,applyFilters:_propTypes.func.isRequired};var _default=FilterModal;exports.default=_default;